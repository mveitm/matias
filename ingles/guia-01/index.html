<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Ingl√©s Unidad 5 - Mat√≠as üöÄ</title>
    <style>
        /* Estilos CSS (puedes mover esto a un archivo style.css si lo prefieres y enlazarlo) */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #e0f7fa; /* Azul claro */
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            justify-content: center;
        }
        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
            min-height: 400px; /* Asegura un tama√±o m√≠nimo */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        h1 {
            color: #00796b; /* Verde oscuro */
            font-size: 2em;
            margin-bottom: 20px;
        }
        h2 {
            color: #00796b; /* Verde oscuro */
            font-size: 1.8em;
            margin-bottom: 25px;
        }
        p {
            font-size: 1.1em;
            line-height: 1.6;
        }
        .question-text { /* Cambiado de .question para evitar conflicto con ID */
            font-size: 1.3em;
            margin-bottom: 30px;
            color: #4a148c; /* Morado oscuro */
            min-height: 3em; /* Para asegurar espacio */
        }
        .options-container {
            margin-top: 20px;
        }
        .options-container button {
            display: block;
            background-color: #90caf9; /* Azul medio */
            color: #333;
            padding: 15px;
            margin: 10px auto; /* Centra los botones */
            border-radius: 8px;
            text-decoration: none;
            font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 80%; /* Ancho de los botones */
            max-width: 300px; /* L√≠mite de ancho */
            border: none; /* Sin borde */
            cursor: pointer;
        }
        .options-container button:hover:not(:disabled) {
            background-color: #64b5f6;
            transform: translateY(-2px);
        }
        .options-container button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .start-button, .restart-button {
            display: inline-block;
            background-color: #4CAF50; /* Verde */
            color: white;
            padding: 15px 30px;
            text-align: center;
            text-decoration: none;
            font-size: 1.2em;
            border-radius: 10px;
            margin-top: 30px;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .start-button:hover, .restart-button:hover {
            background-color: #45a049;
        }
        .feedback {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.2em;
            min-height: 2em;
        }
        .correct-feedback {
            color: #2e7d32; /* Verde oscuro */
        }
        .incorrect-feedback {
            color: #c62828; /* Rojo oscuro */
        }
        #results {
            margin-top: 30px;
        }
        #results h2 {
            margin-bottom: 15px;
        }
        #results table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px auto;
            max-width: 400px; /* Ancho m√°ximo de la tabla */
        }
        #results table th, #results table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        #results table th {
            background-color: #00796b;
            color: white;
        }
        #results table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="startScreen">
            <h1>üëã ¬°Hola Mat√≠as!</h1>
            <h2>Preparado para tu Repaso de Ingl√©s de la Unidad 5? ‚ú®</h2>
            <p>Esta gu√≠a es para ti. ¬°Solo haz clic en la respuesta correcta! Los puntos se sumar√°n autom√°ticamente y ver√°s tu nota al final.</p>
            <button class="start-button" onclick="startQuiz()">Comenzar el Quiz üöÄ</button>
        </div>

        <div id="quizScreen" class="hidden">
            <h2 id="sectionTitle"></h2>
            <p class="question-text" id="questionText"></p>
            <div class="options-container" id="optionsContainer">
                </div>
            <p class="feedback" id="feedbackMessage"></p>
            <button id="nextQuestionBtn" class="next-button hidden" onclick="nextQuestion()">Siguiente Pregunta üëâ</button>
        </div>

        <div id="resultsScreen" class="hidden">
            <h1>¬°Felicidades, Mat√≠as! Has completado el Quiz. üéâ</h1>
            <h2>Tus Resultados:</h2>
            <p id="totalPointsDisplay" style="color: #4a148c; font-size: 1.5em;"></p>
            <p id="finalGradeDisplay" style="color: #00796b; font-size: 1.8em; font-weight: bold;"></p>

            <h3 style="margin-top: 30px; color: #00796b;">Tabla de Referencia de Notas:</h3>
            <table>
                <thead>
                    <tr>
                        <th>Puntos Obtenidos</th>
                        <th>Nota (1.0 - 7.0)</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
            
            <p style="margin-top: 20px;">¬°Sigue practicando para mejorar! üí™</p>
            <button class="restart-button" onclick="restartQuiz()">Volver a Intentar üîÑ</button>
        </div>
    </div>

    <script>
        // Array de objetos para almacenar todas las preguntas
        const questions = [
            // I. Vocabulary: Connecting People & Digital World (12 Puntos)
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "A. Elige la palabra que mejor completa la oraci√≥n. <br> 1. Muchas personas usan _______ para compartir fotos y videos con amigos. üì∏",
                options: ["a) apps", "b) social media"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "2. Si quieres leer informaci√≥n online, visitas un _______. üìñ",
                options: ["a) blog", "b) website"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "3. Necesito _______ estos documentos a la nube para poder acceder a ellos en cualquier lugar. ‚¨ÜÔ∏è",
                options: ["a) download", "b) upload"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "4. Mi abuela prefiere quedarse _______; a ella no le gusta usar internet. üìµ",
                options: ["a) offline", "b) online"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "5. Tener una buena _______ de contactos puede ayudarte a encontrar un trabajo. ü§ù",
                options: ["a) community", "b) network"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "6. Puedes encontrar muchas _______ √∫tiles para aprender idiomas en tu tel√©fono. üì±",
                options: ["a) devices", "b) apps"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "7. √âl escribe un _______ diario sobre sus viajes por el mundo. ‚úàÔ∏è",
                options: ["a) website", "b) blog"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "8. Mi nueva computadora tiene un _______ muy r√°pido, lo que ayuda con los juegos. ‚ö°Ô∏è",
                options: ["a) screen", "b) processor"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "B. Indica si la definici√≥n es VERDADERA o FALSA. <br> 9. Un **Smartphone** es un tipo de reloj. ‚åöÔ∏è",
                options: ["a) Verdadero", "b) Falso"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "10. **Wi-Fi** te permite conectarte a internet sin cables. üì°",
                options: ["a) Verdadero", "b) Falso"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "11. **Digital** se refiere a algo que solo existe en papel. üìÑ",
                options: ["a) Verdadero", "b) Falso"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "I. Vocabulary: Connecting People & Digital World üåê",
                question: "12. Una **Community** es un grupo de personas con intereses similares. üèòÔ∏è",
                options: ["a) Verdadero", "b) Falso"],
                correctAnswerIndex: 0,
                points: 1
            },

            // II. Vocabulary: Remember your Manners (12 Puntos)
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "A. Elige la palabra que mejor completa la oraci√≥n. <br> 13. Es importante mostrar _______ a tus profesores y mayores. üôè",
                options: ["a) disrespect", "b) respect"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "14. Por favor, no _______ cuando estoy hablando. Espera tu turno. ü§ê",
                options: ["a) interrupt", "b) listen"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "15. Decir \"gracias\" es una se√±al de buenos _______. üíñ",
                options: ["a) manners", "b) technology"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "16. Ella fue muy _______ y no salud√≥ a nadie cuando entr√≥ a la habitaci√≥n. üò†",
                options: ["a) polite", "b) rude"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "17. Si cometes un error, siempre debes _______. üòî",
                options: ["a) apologize", "b) ignore"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "18. Conocer la _______ adecuada es importante en situaciones formales. ü§µ‚Äç‚ôÄÔ∏è",
                options: ["a) etiquette", "b) rudeness"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "19. Es _______ ofrecer tu asiento a una persona mayor en el autob√∫s. üëç",
                options: ["a) rude", "b) polite"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "20. √âl mostr√≥ gran _______ al ayudar a su vecino con las bolsas pesadas. ü§ó",
                options: ["a) thoughtlessness", "b) consideration"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "B. ¬øConsiderar√≠as esta acci√≥n un \"buen modale\" o un \"mal modale\"? <br> 21. Usar tu tel√©fono durante la cena familiar. üìµ",
                options: ["a) Buen modale", "b) Mal modale"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "22. Decir \"por favor\" cuando pides algo. üôè",
                options: ["a) Buen modale", "b) Mal modale"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "23. Interrumpir a alguien mientras est√° hablando. üó£Ô∏è",
                options: ["a) Buen modale", "b) Mal modale"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "II. Vocabulary: Remember your Manners üòá",
                question: "24. Ayudar a alguien que se le cae algo. ü§ù",
                options: ["a) Buen modale", "b) Mal modale"],
                correctAnswerIndex: 0,
                points: 1
            },

            // III. Grammar: Question Forms (20 Puntos)
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "A. ¬øEs esta una \"Subject Question\" (SQ), o \"Object Question\" (OQ)? <br> 25. What did you hear on the news? üì∞",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "26. Who invented the telephone? üìû",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "27. Who did you hire for the job? üíº",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "28. What inspired her to write the book? ‚úçÔ∏è",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "29. What did you find in the drawer? üìÅ",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "30. Who took the last cookie? üç™",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "31. What did you buy at the store? üõçÔ∏è",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "32. Who painted the Mona Lisa? üñºÔ∏è",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "33. What caused the power outage? ‚ö°",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "34. Who did you meet at the party? üéâ",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "35. What did you eat for lunch? üçΩÔ∏è",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "36. Who found the lost wallet? üëõ",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "37. Who did you see at the concert? üé§",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "38. What disturbed you during the night? ü¶â",
                options: ["a) SQ", "b) OQ"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "B. Elige la \"Question Tag\" correcta. <br> 39. You like pizza, _______? üçï",
                options: ["a) don't you", "b) do you"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "40. She isn't coming, _______? üö´",
                options: ["a) isn't she", "b) is she"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "41. He can play the guitar, _______? üé∏",
                options: ["a) can he", "b) can't he"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "42. They didn't finish the project, _______? üë∑‚Äç‚ôÄÔ∏è",
                options: ["a) did they", "b) didn't they"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "43. It's a beautiful day, _______? ‚òÄÔ∏è",
                options: ["a) isn't it", "b) is it"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "III. Grammar: Question Forms ‚ùì",
                question: "44. We should go now, _______? ‚è∞",
                options: ["a) shouldn't we", "b) should we"],
                correctAnswerIndex: 0,
                points: 1
            },

            // IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) (20 Puntos)
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "A. Elige la forma correcta del verbo (gerundio o infinitivo). <br> 45. My brother hates _______ (do) homework. üìö",
                options: ["a) doing", "b) to do"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "46. I decided _______ (learn) a new language. üó£Ô∏è",
                options: ["a) learning", "b) to learn"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "47. Have you finished _______ (clean) your room yet? üßπ",
                options: ["a) cleaning", "b) to clean"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "48. Don't forget _______ (turn off) the lights when you leave. üí°",
                options: ["a) turning off", "b) to turn off"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "49. She suggested _______ (order) some pizza for dinner. üçï",
                options: ["a) ordering", "b) to order"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "50. He agreed _______ (help) me with my math. ‚ûï",
                options: ["a) helping", "b) to help"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "51. I enjoy _______ (spend) time with my family. üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
                options: ["a) spending", "b) to spend"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "52. They stopped _______ (talk) when the movie started. ü§´",
                options: ["a) talking", "b) to talk"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "53. We plan _______ (visit) the museum next week. üèõÔ∏è",
                options: ["a) visiting", "b) to visit"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "54. Would you mind _______ (close) the door, please? üö™",
                options: ["a) closing", "b) to close"],
                correctAnswerIndex: 0,
                points: 1
            },
            // Di√°logo B. (10 puntos en total)
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "B. Elige la forma verbal correcta (gerundio o infinitivo) para completar el di√°logo. <br> 55. Anna: Hey Tom, what are you planning (1) _______ (do) this weekend? ü§î",
                options: ["a) doing", "b) to do"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "56. Tom: I'm thinking of (2) _______ (go) hiking. ‚õ∞Ô∏è",
                options: ["a) going", "b) to go"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "57. Tom: I really enjoy (3) _______ (be) in nature. üå≥",
                options: ["a) being", "b) to be"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "58. Anna: That sounds fun! I decided (4) _______ (stay) home. üè°",
                options: ["a) staying", "b) to stay"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "59. Anna: And finish (5) _______ (read) my new book. üìñ",
                options: ["a) reading", "b) to read"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "60. Tom: Oh, remember (6) _______ (send) me that link for the online course. üîó",
                options: ["a) sending", "b) to send"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "61. Tom: I want (7) _______ (check) it out. ‚úÖ",
                options: ["a) checking", "b) to check"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "62. Anna: Sure, I won't forget (8) _______ (send) it. ‚úâÔ∏è",
                options: ["a) sending", "b) to send"],
                correctAnswerIndex: 1,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "63. Anna: Would you mind (9) _______ (help) me with my computer later? üíª",
                options: ["a) helping", "b) to help"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "IV. Grammar: Verbs followed by -ing and to (Infinitive/Gerund) ‚úÖ",
                question: "64. Anna: It stopped (10) _______ (work) properly. ‚ùå",
                options: ["a) working", "b) to work"],
                correctAnswerIndex: 0,
                points: 1
            },
            
            // V. Grammar: Questions ending with prepositions (16 Puntos)
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "A. Rearrange the words to form questions ending with prepositions. <br> 65. With are project this who you working on?",
                options: ["a) Who are you working on this project with?", "b) Who are you working this project on with?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "66. Come meeting up for did you ideas what the with?",
                options: ["a) What ideas did you come up with for the meeting?", "b) What ideas did you come for up the meeting with?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "67. On rely tough during times can who you?",
                options: ["a) Who can you rely on during tough times?", "b) Who can you rely during tough times on?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "68. Apply did what at program school you for?",
                options: ["a) What school program did you apply for?", "b) What did you apply for at school program?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "69. About you who the were to talking plans?",
                options: ["a) Who were you talking to about the plans?", "b) Who were you talking about the plans to?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "70. Looking are to forward you what events?",
                options: ["a) What events are you looking forward to?", "b) What events are you looking to forward?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "71. From information get who did that you?",
                options: ["a) Who did you get that information from?", "b) Who did you get from that information?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "72. Money investment what into did you put your?",
                options: ["a) What did you put your money investment into?", "b) What did you put into your money investment?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "73. Sit event who you at next to did the?",
                options: ["a) Who did you sit next to at the event?", "b) Who did you sit at the event next to?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "74. Worried you what are about risks?",
                options: ["a) What risks are you worried about?", "b) What are you worried about risks?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "B. Write a question for the answers below using the preposition you have. <br> 75. Answer: I'm looking *at the sunset*. üåÖ",
                options: ["a) What are you looking at?", "b) What are you looking?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "76. Answer: She is looking *for Mary*. üïµÔ∏è‚Äç‚ôÄÔ∏è",
                options: ["a) Who is she looking for?", "b) Who is she looking?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "77. Answer: They are talking *to the teacher*. üë©‚Äçüè´",
                options: ["a) Who are they talking to?", "b) Who are they talking?"],
                correctAnswerIndex: 0,
                points: 1
            },
            {
                section: "V. Grammar: Questions ending with prepositions üîö",
                question: "78. Answer: I agree *with his opinion*. üí¨",
                options: ["a) What do you agree with?", "b) What do you agree?"],
                correctAnswerIndex: 0,
                points: 1
            },
            // Las preguntas 79 y 80 de esta secci√≥n corresponden a la siguiente imagen que falta.
            // Por el momento, el quiz tiene 78 preguntas.
            // Para llegar a 80 puntos, necesitar√≠amos 2 preguntas m√°s en esta secci√≥n.
            // O ajustar el totalPossiblePoints si la gu√≠a solo tiene 78 preguntas.
            // He ajustado el totalPossiblePoints a 78 por ahora, asumiendo que el documento solo tiene hasta la 78.
            // Si hay m√°s preguntas en otra imagen, por favor, s√∫bela.
        ];

        let currentQuestionIndex = 0;
        let userScore = 0;
        const totalPossiblePoints = 78; // Suma de todos los 'points' en el array questions. Actualizado a 78.

        // Referencias a elementos HTML
        const startScreen = document.getElementById('startScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultsScreen = document.getElementById('resultsScreen');

        const sectionTitle = document.getElementById('sectionTitle');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const nextQuestionBtn = document.getElementById('nextQuestionBtn');

        const totalPointsDisplay = document.getElementById('totalPointsDisplay');
        const finalGradeDisplay = document.getElementById('finalGradeDisplay');
        const gradeTableBody = document.querySelector('#resultsScreen table tbody');

        // --- Funciones del Quiz ---

        function startQuiz() {
            sessionStorage.setItem('quizPoints', '0'); // Reiniciar puntos
            currentQuestionIndex = 0;
            userScore = 0;
            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex < questions.length) {
                const q = questions[currentQuestionIndex];
                sectionTitle.textContent = q.section;
                questionText.innerHTML = q.question; // Usar innerHTML por el <br>
                optionsContainer.innerHTML = ''; // Limpiar opciones anteriores
                feedbackMessage.textContent = ''; // Limpiar feedback
                feedbackMessage.className = 'feedback'; // Resetear clases
                nextQuestionBtn.classList.add('hidden'); // Ocultar bot√≥n Siguiente

                q.options.forEach((optionText, index) => {
                    const button = document.createElement('button');
                    button.textContent = optionText;
                    button.onclick = () => checkAnswer(index === q.correctAnswerIndex);
                    optionsContainer.appendChild(button);
                });
            } else {
                showResults();
            }
        }

        function checkAnswer(isCorrect) {
            const currentQ = questions[currentQuestionIndex];
            const optionsButtons = optionsContainer.querySelectorAll('button');

            // Deshabilitar botones despu√©s de la selecci√≥n
            optionsButtons.forEach(button => {
                button.disabled = true;
                button.style.cursor = 'not-allowed';
            });

            if (isCorrect) {
                userScore += currentQ.points;
                feedbackMessage.textContent = `¬°Correcto! üéâ Ganaste ${currentQ.points} punto${currentQ.points !== 1 ? 's' : ''}.`;
                feedbackMessage.className = 'feedback correct-feedback';
            } else {
                feedbackMessage.textContent = '¬°Incorrecto! üòî Sigue practicando.';
                feedbackMessage.className = 'feedback incorrect-feedback';
            }
            
            // Guarda los puntos acumulados en sessionStorage para persistencia si la p√°gina se recarga
            sessionStorage.setItem('quizPoints', userScore); 
            nextQuestionBtn.classList.remove('hidden'); // Mostrar bot√≥n Siguiente
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function calculateGrade(score) {
            let finalGrade;
            // Nota m√≠nima 2.0 por 0 puntos.
            // Nota de aprobaci√≥n 4.0 con 60% de exigencia (0.60 * 78 = 46.8 puntos). Redondeado a 47 para la aprobaci√≥n.
            // Nota m√°xima 7.0 con 78 puntos.

            const pointsForPass = 47; // 60% de 78 puntos

            if (score <= pointsForPass) {
                // Rango 2.0 a 4.0 (de 0 a 47 puntos)
                finalGrade = 2.0 + (score / pointsForPass) * 2.0;
            } else {
                // Rango 4.0 a 7.0 (de 48 a 78 puntos)
                finalGrade = 4.0 + ((score - pointsForPass) / (totalPossiblePoints - pointsForPass)) * 3.0;
            }
            
            // Asegurar que la nota est√© en el rango de 1.0 a 7.0 y redondear
            finalGrade = Math.min(7.0, Math.max(1.0, finalGrade)).toFixed(1);
            return finalGrade;
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            // Recupera el score final (por si se refresca la p√°gina de resultados)
            userScore = parseInt(sessionStorage.getItem('quizPoints') || '0'); 
            totalPointsDisplay.textContent = `Puntos Obtenidos: ${userScore} / ${totalPossiblePoints}`;
            
            const grade = calculateGrade(userScore);
            finalGradeDisplay.textContent = `Tu Nota Final: ${grade}`;

            // Generar la tabla de notas para referencia
            gradeTableBody.innerHTML = ''; // Limpiar tabla antes de llenar
            const gradeRanges = [
                { points: "0", displayGrade: "2.0" },
                { points: "1-10", displayGrade: "2.0 - 2.4" }, // Approx
                { points: "11-20", displayGrade: "2.5 - 2.8" },
                { points: "21-30", displayGrade: "2.9 - 3.2" },
                { points: "31
